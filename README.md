# NESTED SETS TREE 

JS-модуль для работы с Nested Sets деревьями (получения элементов дерева).
Работает как в браузере, так и на NodeJS. 

## Инициализация 
При инициализации конструктору передается объект с названиями ключей в массиве

```javascript 
const nestedTree = require('nested-sets-tree');

let tree = new nestedTree({
    id: 'id',
    lvl: 'depth',
    parentId: 'parent_id', 
    lft: 'lft', 
    rgt: 'rgt', 
    hide: 'hide'
}); 
```
## Загрузка дерева 

```javascript 
let array = [
    {
        id: 1, 
        lvl: 0, 
        parent_id: 0
        //...
    }//...
];

tree.loadTree(array);
```
При загрузке данных вместе с самим деревом можно передать объект опций:

**validate** true/false - валидировать ли данные на соответствие формату данных nested sets (проверка индексов). По умолчанию false; 

**createIndexes** true/false - создавать ли индексы для полей для ускорения поиска 
По умолчанию false. 

**indexes** {} - объект с готовыми индексами. Можно передать уже сформирвоанный заранее массив индексов, отсортированных по определнными полям. 

```javascript
tree.loadTree(array, {
    lvl: [//...массив отсортированных элементов]
});
```
## Поиск по дереву 

```javascript 
tree.getChilds(5).ids; //получение id всех прямых потомков элемента с id 5 
tree.getChilds(5).results; //получение самих элементов потомков 
tree.getChilds(5, true).resutls; //поиск прямых потомков за вычетом тех, что отмечены флагом hide
```
## Методы поиска 

Все методы для получения выборки из дерева могут принимать как ID элемента, так и сам элемент 

**getChilds(elementId)** - получить только потомков первого уровня

**getAllChilds(elementId)** - получить всех потомков

**getDepth()** - получить глубину дерева

**getParent(elemenId)** - получить прямого предка элемента

**getAllParents(elementId)** - получить цепочку предков элемента вплоть до корня

**getRootCats()** - получает узлы первого уровня (прямые потомки корня) дерева

**getRootEl()** - получает непосредственно корневой элемент дерева

**isChild(parent, child)** - проверяет является ли элемент child потомком элемента parent

**getElById(elId)** - получает элемент по его ID

**isValidId(elId)** - возвращает булево значение. Проверяет, существует ли в дереве элемент с данным ID 



